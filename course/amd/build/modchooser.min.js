define ("core_course/modchooser",["core/yui","jquery","core/activity_chooser_dialogue","core/activity_chooser_events"],function(a,b,c){var d={PAGECONTENT:"body",SECTION:null,SECTIONMODCHOOSER:"span.section-modchooser-link",SITEMENU:".block_site_main_menu",SITETOPIC:"div.sitetopic"},f=null,g=function(a,e){if(b(a.currentTarget).parents(d.SITETOPIC).length){f=1}else if(b(a.currentTarget).parents(d.SECTION).length){var g=b(a.currentTarget).parents(d.SECTION);f=g.attr("id").replace("section-","")}else if(b(a.currentTarget).parents(d.SITEMENU).length){f=0}e.options.forEach(function(a){a.urls.addoption+="&section="+f});c.displayChooser(a,e)},h=function(a,c){var e=b(a).find(d.SECTIONMODCHOOSER);if(!e.length){return}var f=b(e).children().wrapAll("<a href='#' class='chooser-link' />");b(f).on("click",function(a){a.preventDefault();g(a,c)})},i=function(a,c){if(!c){c=d.PAGECONTENT}b(c).find(d.SITETOPIC).each(function(){h(this,a)});if(d.SECTION){b(c).find(d.SECTION).each(function(){h(this,a)})}b(c).find(d.SITEMENU).each(function(){h(this,a)})};return{init:function initializer(b){a.use("moodle-course-coursebase",function(){var a=M.course.format.get_sectionwrapperclass();if(a){d.SECTION="."+a}i(b)})}}});
//# sourceMappingURL=modchooser.min.js.map
