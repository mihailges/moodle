define ("core/activity_chooser_dialogue",["core/yui","jquery","core/pubsub","core/activity_chooser_events"],function(a,b,c,d){var f=null,g=null,h=null,i=null,j=[],k=null,l=null,m=null,n=null,o={minheight:300,baseheight:400,maxheight:660,closeButtonTitle:{validator:a.Lang.isString,value:"Close"}},p=function(){var a;while(j.length){a=j.shift();b(a).off()}},q=function(){p();h.off();f.hide()},r=function(a){a.preventDefault();q()},s=function(a){var b=[];b.push("modchooserdialogue-course-modchooser".toLowerCase());if(a){for(var c in a){b.push(("modchooserdialogue-course-modchooser-"+c).toLowerCase())}}return b},t=function(){if(f){return}b("body").addClass("jschooser");var a,c={bodyContent:k.html(),headerContent:l.html(),width:"540px",draggable:!0,visible:!1,zindex:100,modal:!0,shim:!0,closeButtonTitle:o.closeButtonTitle,focusOnPreviousTargetAfterHide:!0,render:!1,extraClasses:s()};for(a in m){c[a]=m[a]}f=new M.core.dialogue(c);k.remove();l.remove();f.hide();f.render();h=b(f.get("boundingBox").one(".modchoosercontainer").getDOMNode());i=h.find(".option");n=b("<input type=\"hidden\" value=\"\" name=\"\"/>");h.find("form").append(n);f.get("boundingBox").addClass("modchooserdialogue")},u=function(a){var c=f.get("boundingBox"),d=c.get("winHeight"),e,g;if(f.shouldResizeFullscreen()){return}e=o.maxheight;if(d<=e){if(d<=o.minheight){e=o.minheight}else{e=d}}if(e>o.minheight){if(f.lockScroll&&!f.lockScroll.isActive()){f.lockScroll.enableScrollLock(!0)}}else{if(f.lockScroll&&f.lockScroll.isActive()){f.lockScroll.disableScrollLock()}}g=e;e=e-110;b(a).css("maxHeight",e+"px");var h=c.getStyle("height");if(h.match(/.*px$/)){h=h.replace(/px$/,"")}else{h=g}if(h<o.baseheight){h=o.baseheight;b(a).css("height",h+"px")}f.centerDialogue()},v=function(a){if(27===a.keyCode){r(a)}},w=function(a,b){n.attr({value:b,name:a})},x=function(a){w(a.name,a.value);c.publish(d.OPTION_SELECTED,a)},y=function(){i.each(function(a,c){var d=b(c).parent().parent();if(b(this).is(":checked")){b(d).addClass("selected");x(c);g.removeAttr("disabled");b(c).focus()}else{d.removeClass("selected")}},this)},z=function(a){var c,d,e;t();a.preventDefault();c=f.get("boundingBox");d=h.find(".alloptions");e=b(document).on("orientationchange",function(){u(d)});j.push(e);e=b(window).on("resize",function(){u(d)});j.push(e);e=h.on("click",function(){y()});j.push(e);e=h.on("key_up",function(){y()});j.push(e);e=h.on("dblclick",function(a){if(b(a.target).parents("div.option").length){y();g.attr("disabled","disabled");i.attr("disabled","disabled");p();h.find("form").submit()}});j.push(e);h.find("form").on("submit",function(){g.attr("disabled","disabled");i.attr("disabled","disabled");p()});e=h.find(".addcancel").on("click",function(a){r(a)});j.push(e);e=c.one("button.closebutton").on("click",function(a){r(a)});j.push(e);e=b(document).on("keydown",v,this);j.push(e);g=h.find(".submitbutton");g.attr("disabled","true");i.each(function(){b(this).removeAttr("disabled")});f.show(a);u(d);h.find(".option input[type=radio]").focus();y()};return{setupChooserDialogue:function setupChooserDialogue(a,b,c){k=a;l=b;m=c},displayChooser:z,updateHiddenRadioValue:w}});
//# sourceMappingURL=activity_chooser_dialogue.min.js.map
