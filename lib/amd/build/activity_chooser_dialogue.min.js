define ("core/activity_chooser_dialogue",["core/yui","jquery"],function(a,b){var c=null,d=null,f=null,g=null,h=[],i=null,j=null,k=null,l=null,m={minheight:300,baseheight:400,maxheight:660,closeButtonTitle:{validator:a.Lang.isString,value:"Close"}},n=function(){var a;while(h.length){a=h.shift();b(a).detach()}},o=function(){n();f.remove();c.hide()},p=function(a){a.preventDefault();o()},q=function(a){var b="chooserdialogue-"+name,c=[];c.push(b.toLowerCase());if(a){for(var d in a){c.push((b+"-"+d).toLowerCase())}}return c},r=function(){if(c){return}b("body").addClass("jschooser");var a,d={bodyContent:i.html(),headerContent:j.html(),width:"540px",draggable:!0,visible:!1,zindex:100,modal:!0,shim:!0,closeButtonTitle:m.closeButtonTitle,focusOnPreviousTargetAfterHide:!0,render:!1,extraClasses:q()};for(a in k){d[a]=k[a]}c=new M.core.dialogue(d);i.remove();j.remove();c.hide();c.render();f=b(c.get("boundingBox").one(".choosercontainer").getDOMNode());g=f.find(".option input[type=radio]");l="<input type=\"hidden\" value=\"\" />";f.find("form").append(l);c.get("boundingBox").addClass("chooserdialogue")},s=function(a){var d=c.get("boundingBox"),e=d.get("winHeight"),f,g;if(c.shouldResizeFullscreen()){return}f=m.maxheight;if(e<=f){if(e<=m.minheight){f=m.minheight}else{f=e}}if(f>m.minheight){if(c.lockScroll&&!c.lockScroll.isActive()){c.lockScroll.enableScrollLock(!0)}}else{if(c.lockScroll&&c.lockScroll.isActive()){c.lockScroll.disableScrollLock()}}g=f;f=f-110;b(a).css("maxHeight",f+"px");var h=d.getStyle("height");if(h.match(/.*px$/)){h=h.replace(/px$/,"")}else{h=g}if(h<m.baseheight){h=m.baseheight;b(a).css("height",h+"px")}c.centerDialogue()},t=function(a){if(27===a.keyCode){p(a)}},u=function(){},v=function(){g.each(function(){var a=b(this).parent().parent();if(b(this).is(":checked")){b(a).addClass("selected");u(this);d.removeAttr("disabled");b(this).focus()}else{a.removeClass("selected")}},this)},w=function(a,e){var i,j,k;r();a.preventDefault();i=c.get("boundingBox");j=f.find(".alloptions");k=b(document).on("orientationchange",function(){s(j)});h.push(k);k=b(window).on("resize",function(){s(j)});h.push(k);k=f.on("click",function(){v()});h.push(k);k=f.on("key_up",function(){v()});h.push(k);k=f.on("dblclick",function(a){if(b(a.target).parents("div.option").length){v();d.attr("disabled","disabled");g.attr("disabled","disabled");n();f.find("form").submit()}});h.push(k);f.find("form").on("submit",function(){d.attr("disabled","disabled");g.attr("disabled","disabled");n()});k=f.find(".addcancel").on("click",function(a){p(a)});h.push(k);k=i.one("button.closebutton").on("click",function(a){p(a)});h.push(k);k=b(document).on("keydown",t,this);h.push(k);d=f.find(".submitbutton");d.attr("disabled","true");g.each(function(){b(this).removeAttr("disabled")});c.show(a);s(j);f.find(".option input[type=radio]").focus();v()};return{setupChooserDialogue:function setupChooserDialogue(a,b,c){i=a;j=b;k=c},displayChooser:w}});
//# sourceMappingURL=activity_chooser_dialogue.min.js.map
