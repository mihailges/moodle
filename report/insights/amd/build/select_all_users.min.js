function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("report_insights/select_all_users",["exports","jquery","core/pubsub","core/checkbox-toggleall","core/templates","core/str"],function(a,b,c,d,e,f){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=a.selectedPredictions=void 0;b=i(b);c=h(c);d=i(d);e=i(e);function g(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;g=function(){return a};return a}function h(a){if(a&&a.__esModule){return a}if(null===a||"object"!==_typeof(a)&&"function"!=typeof a){return{default:a}}var b=g();if(b&&b.has(a)){return b.get(a)}var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in a){if(Object.prototype.hasOwnProperty.call(a,e)){var f=d?Object.getOwnPropertyDescriptor(a,e):null;if(f&&(f.get||f.set)){Object.defineProperty(c,e,f)}else{c[e]=a[e]}}}c.default=a;if(b){b.set(a,c)}return c}function i(a){return a&&a.__esModule?a:{default:a}}function j(a){return n(a)||m(a)||l(a)||k()}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(a,b){if(!a)return;if("string"==typeof a)return p(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor)c=a.constructor.name;if("Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return p(a,b)}function m(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function n(a){if(Array.isArray(a))return p(a)}function p(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++){d[c]=a[c]}return d}function q(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function r(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var h=a.apply(b,c);function f(a){q(h,d,e,f,g,"next",a)}function g(a){q(h,d,e,f,g,"throw",a)}f(void 0)})}}var s={CONTAINERS:{SELECTED_PREDICTIONS_INFO:"[data-region=\"selected-predictions-info\"]"},ACTIONS:{SELECT_ALL_EXISTING:"[data-action=\"select-all-existing\"]",CLEAR_ALL:"[data-action=\"clear-all-selected\"]"}},t;a.selectedPredictions=t;var u=function(){c.subscribe(d.default.events.checkboxToggled,function(a){v(a)});document.addEventListener("click",function(){var b=r(regeneratorRuntime.mark(function b(c){var e,g,h,i;return regeneratorRuntime.wrap(function(b){while(1){switch(b.prev=b.next){case 0:if(!c.target.matches(s.ACTIONS.SELECT_ALL_EXISTING)){b.next=14;break}e=document.querySelector(s.CONTAINERS.SELECTED_PREDICTIONS_INFO);g=JSON.parse(e.dataset.allpredictionids);t[c.target.dataset.togglegroup]=g;b.next=6;return(0,f.get_string)("allinsightsselected","report_insights",g.length);case 6:b.t0=b.sent;b.t1=c.target.dataset.togglegroup;b.next=10;return(0,f.get_string)("clearselection","report_insights");case 10:b.t2=b.sent;b.t3={action:"clear-all-selected",togglegroup:b.t1,text:b.t2};h={insightsselected:b.t0,action:b.t3};w(h);case 14:if(c.target.matches(s.ACTIONS.CLEAR_ALL)){i=c.target.dataset.togglegroup;d.default.setGroupState(document,i,!1);a.selectedPredictions=t=[];x()}case 15:case"end":return b.stop();}}},b)}));return function(){return b.apply(this,arguments)}}())},v=function(){var c=r(regeneratorRuntime.mark(function c(d){var e,g,h,i,j,k,l,m;return regeneratorRuntime.wrap(function(c){while(1){switch(c.prev=c.next){case 0:a.selectedPredictions=t=[];e=[];g=document.querySelector(s.CONTAINERS.SELECTED_PREDICTIONS_INFO);h=JSON.parse(g.dataset.allpredictionids);i=d.checkedSlaves;j=d.slaves;if(!(0<i.length)){c.next=30;break}b.default.each(d.checkedSlaves,function(a,c){var d=(0,b.default)(c).val();e.push(d)});t[d.toggleGroupName]=e;if(!(j.length===i.length&&h.length>j.length)){c.next=23;break}l=document.querySelector(s.CONTAINERS.SELECTED_PREDICTIONS_INFO);m=JSON.parse(l.dataset.allpredictionids);c.next=14;return(0,f.get_string)("allinsightsonpageselected","report_insights",d.checkedSlaves.length);case 14:c.t0=c.sent;c.t1=d.toggleGroupName;c.next=18;return(0,f.get_string)("selectallinsights","report_insights",m.length);case 18:c.t2=c.sent;c.t3={action:"select-all-existing",togglegroup:c.t1,text:c.t2};k={insightsselected:c.t0,action:c.t3};c.next=27;break;case 23:c.next=25;return(0,f.get_string)("insightsselected","report_insights",d.checkedSlaves.length);case 25:c.t4=c.sent;k={insightsselected:c.t4};case 27:w(k);c.next=31;break;case 30:x();case 31:case"end":return c.stop();}}},c)}));return function(){return c.apply(this,arguments)}}(),w=function(){var a=r(regeneratorRuntime.mark(function a(b){var c,d,f;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:a.next=2;return e.default.renderForPromise("report_insights/insights_selected",b);case 2:c=a.sent;d=c.html;f=c.js;a.next=7;return e.default.replaceNodeContents(s.CONTAINERS.SELECTED_PREDICTIONS_INFO,d,f);case 7:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}(),x=function(){j(document.querySelectorAll(s.CONTAINERS.SELECTED_PREDICTIONS_INFO)).map(function(a){return a.innerHTML=""})};a.init=function init(){u()}});
//# sourceMappingURL=select_all_users.min.js.map
