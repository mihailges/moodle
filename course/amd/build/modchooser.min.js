define ("core_course/modchooser",["core/yui","jquery","core/activity_chooser_dialogue","core/activity_chooser_events"],function(a,b,c,d,e){var f={PAGECONTENT:"body",SECTION:null,SECTIONMODCHOOSER:"span.section-modchooser-link",SITEMENU:".block_site_main_menu",SITETOPIC:"div.sitetopic"},g=null,h=null,i=function(a){if(b(a.currentTarget).parents(f.SITETOPIC).length){h=1}else if(b(a.currentTarget).parents(f.SECTION).length){var d=b(a.currentTarget).parents(f.SECTION);h=d.attr("id").replace("section-","")}else if(b(a.currentTarget).parents(f.SITEMENU).length){h=0}var e=b(".modchooserdialoguebody").detach(),i=b(".modchoosertitle");console.log(g);c.setupChooserDialogue(i,data);c.displayChooser(a)},j=function(a){var c=b(a).find(f.SECTIONMODCHOOSER);if(!c.length){return}var d=b(c).children().wrapAll("<a href='#' class='chooser-link' />");b(d).on("click",function(a){console.log(g);a.preventDefault();i(a)})},k=function(a){if(!a){a=f.PAGECONTENT}b(a).find(f.SITETOPIC).each(function(){j(this)});if(f.SECTION){b(a).find(f.SECTION).each(function(){j(this)})}b(a).find(f.SITEMENU).each(function(){j(this)})},l=function(a){c.updateHiddenRadioValue("jump",a.value+"&section="+h)};return{init:function initializer(){a.use("moodle-course-coursebase",function(){var a=M.course.format.get_sectionwrapperclass();if(a){f.SECTION="."+a}k()});d.subscribe(e.OPTION_SELECTED,l)},setModChooserData:function setModChooserData(a){g=a}}});
//# sourceMappingURL=modchooser.min.js.map
