define ("core/activity_chooser_dialogue",["core/yui","jquery","core/pubsub","core/activity_chooser_events","core/local/aria/focuslock","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f,g){var h=null,i=null,j=[],k=null,l=null,m={minheight:300,baseheight:400,maxheight:660,closeButtonTitle:{validator:a.Lang.isString,value:"Close"}},n=function(){var a;while(j.length){a=j.shift();b(a).off()}},o=function(){n();null.off();h.hide()},p=function(a){a.preventDefault();o()},q={MODULE_CHOOSER_CONTAINER:".modal-body .modchoosercontainer",MODULES_AREA:".modchoosercontainer .modulescontainer",MODULE_AREA:".module",MODULE_INFO_AREA:".modinfo",MODULE_INFO_ACTIONS:{ADD_MODULE:".modinfo .modicon a",SHOW_MODULE_SUMMARY:".modinfo .modactions .showmodsummary i"},MODULE_SUMMARY_AREA:".modsummary",MODULE_SUMMARY_ACTIONS:{ADD_MODULE:".modsummary .actions .addmodule",CLOSE_MODULE_SUMMARY:".modsummary .actions .closemodsummary"}},r=function(a){return f.create({type:f.types.DEFAULT,body:k.html(),title:l.html(),large:!0}).then(function(c){c.getRoot().on(g.shown,function(){var c=b(q.MODULE_AREA).find(q.MODULE_INFO_ACTIONS.ADD_MODULE+", "+q.MODULE_SUMMARY_ACTIONS.ADD_MODULE);c.each(function(b,c){c.href+="&section="+a});var d=b(q.MODULES_AREA).find(q.MODULE_AREA);console.log(d);var e=d[0];console.log(e);b(e).attr("tabindex",0);var f=b(q.MODULE_SUMMARY_AREA).find(".helplinkpopup");f.each(function(a,c){b(c).attr("tabindex",-1)})}.bind(this));c.getRoot().on(g.hidden,function(){c.getRoot().remove()}.bind(this));c.show();return c})},s=function(a){var c=b(q.MODULE_CHOOSER_CONTAINER).scrollTop(),d=b(q.MODULE_CHOOSER_CONTAINER).outerHeight();b(q.MODULE_CHOOSER_CONTAINER).addClass("noscroll");console.log(c);t(a,c,d);var e=a.find(".content");if(0<e.scrollTop()){e.scrollTop(0)}a.addClass("open");var f=a.find(q.MODULE_SUMMARY_ACTIONS.CLOSE_MODULE_SUMMARY),g=a.find(q.MODULE_SUMMARY_ACTIONS.ADD_MODULE);b(f).attr("tabindex",0);b(g).attr("tabindex",0)},t=function(a,b,c){var d=a.find(".content"),e=a.find(".action-footer"),f=e.height();d.css({height:c-f+"px"});a.css({top:b+"px",height:c+"px"})},u=function(a,c){b(c).attr("tabindex",0);b(c).focus();b(a).attr("tabindex",-1)};return{setupChooserDialogue:function setupChooserDialogue(a,b){k=a;l=b},displayChooser:function displayChooser(a,b){r(b)},updateHiddenRadioValue:function updateHiddenRadioValue(a,b){null.attr({value:b,name:a})}}});
//# sourceMappingURL=activity_chooser_dialogue.min.js.map
