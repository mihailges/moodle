define ("core_course/modchooser",["core/yui","jquery","core_course/chooser_dialogue"],function(a,b,c){var d={PAGECONTENT:"body",SECTION:null,SECTIONMODCHOOSER:"span.section-modchooser-link",SITEMENU:".block_site_main_menu",SITETOPIC:"div.sitetopic"},f=function(a,e){if(b(a.currentTarget).parents(d.SITETOPIC).length){var f=1}else if(b(a.currentTarget).parents(d.SECTION).length){var g=b(a.currentTarget).parents(d.SECTION),f=g.attr("id").replace("section-","")}else if(b(a.currentTarget).parents(d.SITEMENU).length){var f=0}if(f!==void 0){e.options.forEach(function(a){a.urls.addoption+="&section="+f})}c.displayChooser(a,e)},g=function(a,c){var e=b(a).find(d.SECTIONMODCHOOSER);if(!e.length){return}var g=b(e).children().wrapAll("<a href='#' class='chooser-link' />");b(g).on("click",function(a){a.preventDefault();f(a,c)})},h=function(a,c){if(!c){c=d.PAGECONTENT}b(c).find(d.SITETOPIC).each(function(){g(this,a)});if(d.SECTION){b(c).find(d.SECTION).each(function(){g(this,a)})}b(c).find(d.SITEMENU).each(function(){g(this,a)})};return{init:function initializer(b){a.use("moodle-course-coursebase",function(){var a=M.course.format.get_sectionwrapperclass();if(a){d.SECTION="."+a}h(b)})}}});
//# sourceMappingURL=modchooser.min.js.map
