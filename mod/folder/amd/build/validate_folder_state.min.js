define(["jquery","core/ajax","core/notification","core/str"],function(a,b,c,d){var e={SUBMIT_BUTTON:"#id_submitbutton"},f=function(){a(e.SUBMIT_BUTTON).on("click",function(b){b.preventDefault();var c=parseInt(a("[name=folder_id]").val()),d=parseInt(a("[name=revision]").val());g(c,d)})},g=function(e,f){var g={methodname:"mod_folder_folder_state_changed",args:{folderid:e,revision:f}};b.call([g])[0].done(function(b){if(b.status)a.when(d.get_string("reload"),d.get_string("cancel")).done(function(a,d){c.confirm(b.warnings[0].key,b.warnings[0].message,a,d,function(){window.location.reload()})});else{window.onbeforeunload=null;var e=h();e.submit()}}).fail(c.exception)},h=function(){return a(e.SUBMIT_BUTTON).closest("form")};return{init:function(){f()}}});