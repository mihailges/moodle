YUI.add("moodle-course-modchooser",function(i,e){var c={PAGECONTENT:"body",SECTION:null,SECTIONMODCHOOSER:"span.section-modchooser-link",SITEMENU:".block_site_main_menu",SITETOPIC:"div.sitetopic"},o="course-modchooser",t=function(){t.superclass.constructor.apply(this,arguments)};i.extend(t,M.core.chooserdialogue,{sectionid:null,initializer:function(){var e,o,t,s=M.course.format.get_sectionwrapperclass();s&&(c.SECTION="."+s),e=i.one(".chooserdialoguebody"),o=i.one(".choosertitle"),t={},this.setup_chooser_dialogue(e,o,t),this.setup_for_section(),M.course.coursebase.register_module(this)},setup_for_section:function(e){e=e||c.PAGECONTENT,i.one(e).all(c.SITETOPIC).each(function(e){this._setup_for_section(e)},this),c.SECTION&&i.one(e).all(c.SECTION).each(function(e){this._setup_for_section(e)},this),i.one(e).all(c.SITEMENU).each(function(e){this._setup_for_section(e)},this)},_setup_for_section:function(e){var o,t=e.one(c.SECTIONMODCHOOSER);t&&(o=i.Node.create("<a href='#' />"),t.get("children").each(function(e){o.appendChild(e)}),t.insertBefore(o),o.on("click",this.display_mod_chooser,this))},display_mod_chooser:function(e){if(e.target.ancestor(c.SITETOPIC))this.sectionid=1;else if(e.target.ancestor(c.SECTION)){var o=e.target.ancestor(c.SECTION);this.sectionid=o.get("id").replace("section-","")}else e.target.ancestor(c.SITEMENU)&&(this.sectionid=0);this.display_chooser(e)},option_selected:function(e){this.hiddenRadioValue.setAttrs({name:"jump",value:e.get("value")+"&section="+this.sectionid})}},{NAME:o,ATTRS:{maxheight:{value:800}}}),M.course=M.course||{},M.course.init_chooser=function(e){return new t(e)}},"@VERSION@",{requires:["moodle-core-chooserdialogue","moodle-course-coursebase"]});